jQuery(document).ready(function($){$("#asd-map-wrap").tabs();$("#asd-map-place ").spin("map","#777");});var maplace=new Maplace({map_div:"#asd-map-place",controls_div:"#asd-map-controls",controls_type:"list",controls_on_map:false,view_all:true,view_all_text:"All Places"});jQuery("#map-tabs").find("a").click(function(e){var index=jQuery(this).attr("data-load");jQuery(this).spin("map_tab","#fff");jQuery(this).parent().toggleClass("loading");showGroup(index);});function showGroup(index){var el=jQuery("#"+index);jQuery("#maps-tabs").find("li").removeClass("active");jQuery(el).parent().addClass("active");jQuery.post(MapAjax.asd_feature_map_ajaxurl,{cat:index,asd_feature_map_nonce:MapAjax.asd_feature_map_nonce,action:"asd_feature_map_action"},function(mapdata){var $item=jQuery("#map-tabs").find("li.loading");jQuery("#asd-map-place ").spin(false);$item.find("a").spin(false);$item.toggleClass("loading");var options="";if(mapdata.hasOwnProperty("map_options")){options={set_center:mapdata.map_options.set_center,zoom:mapdata.map_options.zoom};}maplace.Load({locations:mapdata.locations,view_all_text:mapdata.title,type:mapdata.type,force_generate_controls:true,map_options:options});addDirections();},"json");}function addDirections(){var $container=jQuery("#asd-map-controls").find("li");var $is_apple=jQuery(".directions").attr("data-os");if($is_apple=="true"){$container.append(function(){var $directions=jQuery(this).find("a").not("#ullist_a_all").find(".directions");var $lat=$directions.attr("data-lat");var $lng=$directions.attr("data-lng");var $address=$directions.attr("data-addr");if($lat){if($address){return'<p><a href="http://maps.apple.com/?ll='+$lat+","+$lng+"&daddr="+$address+'" class="button">Get Directions</a></p>';}else{return'<p><a href="http://maps.apple.com/?ll='+$lat+","+$lng+'"  class="button">Map It</a></p>';}}else{return false;}});}else{$container.append(function(){var $directions=jQuery(this).find(".directions");var $lat=$directions.attr("data-lat");var $lng=$directions.attr("data-lng");var $address=$directions.attr("data-addr");if($lat){if($address){return'<p><a href="https://www.google.com/maps/dir/'+$address+"/@"+$lat+","+$lng+'"  class="button">Get Directions</a></p>';}else{return'<p><a href="https://www.google.com/maps/place/'+$lat+","+$lng+'"  class="button">Map It</a></p>';}}else{return false;}});}}