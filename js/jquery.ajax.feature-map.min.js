/**
 * Ajax Request Page for the Loading of the Feature Maps
 *
 * @author: Alex Stillwagon
 * @package Alex's Feature Maps
 * Author URI: http://alexstillwagon.com
 * @version: 1.2.6
 *
 * Note that jQuery is loaded in safe mode for use in WP ( i.e. no '$' var. Instead the full 'jQuery' var. )
 */
jQuery(document).ready(function($){$("#asd-map-wrap").tabs();$('#asd-map-place ').spin('map','#777')});var maplace=new Maplace({map_div:'#asd-map-place',controls_div:'#asd-map-controls',controls_type:'list',controls_on_map:false,view_all:true,view_all_text:'All Places'});jQuery('#map-tabs').find('a').click(function(e){var a=jQuery(this).attr('data-load');jQuery(this).spin('map_tab','#fff');jQuery(this).parent().toggleClass('loading');showGroup(a)});function showGroup(d){var e=jQuery('#'+d);jQuery('#maps-tabs').find('li').removeClass('active');jQuery(e).parent().addClass('active');jQuery.post(MapAjax.asd_feature_map_ajaxurl,{cat:d,asd_feature_map_nonce:MapAjax.asd_feature_map_nonce,action:'asd_feature_map_action'},function(a){var b=jQuery('#map-tabs').find('li.loading');jQuery('#asd-map-place ').spin(false);b.find('a').spin(false);b.toggleClass('loading');var c="";if(a.hasOwnProperty('map_options')){c={set_center:a.map_options.set_center,zoom:a.map_options.zoom}}maplace.Load({locations:a.locations,view_all_text:a.title,type:a.type,force_generate_controls:true,map_options:c});addDirections()},'json')}function addDirections(){var e=jQuery('#asd-map-controls').find('li');var f=jQuery('.directions').attr('data-os');if(f=='true'){e.append(function(){var a=jQuery(this).find('a').not('#ullist_a_all').find('.directions');var b=a.attr('data-lat');var c=a.attr('data-lng');var d=a.attr('data-addr');if(b){if(d){return'<p><a href="http://maps.apple.com/?ll='+b+','+c+'&daddr='+d+'">Get Directions</a></p>'}else{return'<p><a href="http://maps.apple.com/?ll='+b+','+c+'">Map It</a></p>'}}else{return false}})}else{e.append(function(){var a=jQuery(this).find('.directions');var b=a.attr('data-lat');var c=a.attr('data-lng');var d=a.attr('data-addr');if(b){if(d){return'<p><a href="https://www.google.com/maps/dir/'+d+'/@'+b+','+c+'">Get Directions</a></p>'}else{return'<p><a href="https://www.google.com/maps/place/'+b+','+c+'">Map It</a></p>'}}else{return false}})}}